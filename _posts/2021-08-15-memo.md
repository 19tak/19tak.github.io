---
layout: post
title: "[01] ROS 설치, Ubuntu"
categories: [ROS, Ubuntu]
tags: [ROS, Ubuntu]
fullview: false
comments: false
---

파티션 분리 후 우분투 리눅스 듀얼부팅 설치방법
<https://jimnong.tistory.com/676>

우분투 최신버젼 20.04.2.0 LTS
<https://ubuntu.com/download/desktop>
(설치 usb 만들어둠.)

우분투 한글 설정방법
<https://webnautes.tistory.com/1199>

ros noetic (최신버젼) 설치
<https://pinkwink.kr/1319>

<http://wiki.ros.org/noetic/Installation/Ubuntu>

---

`~/. bashrc`에 추가할 내용

```
# Set ROS Noetic
source /opt/ros/noetic/setup.bash
source ~/catkin_ws/devel/setup.bash

# Set Ros Network
export ROS_HOSTNAME=localhost
export ROS_MASTER_URI=https://localhost:11311

# Set ROS alias command
alias cw='cd ~/catkin_ws'
alias cs='cd ~/catkin_ws/src'
alias cm='cd ~/catkin_ws && catkin_make'
```

설정 추가한뒤 터미널창에
`$ source ~/.bashrc`

Network 설정시
마스터 PC 따로 존재, 로봇은 호스트 PC 사용할경우
구분하여 입력할경우 서로 통신 가능.

Network 설정시 localhost의 경우 오류 발견..
일단은.. 터미널 창에서 ifconfig 이용하여 본인 ip 입력

```
# Set ROS Network
export ROS_HOSTNAME=localhost
export ROS_MASTER_URI=http://{ROS_HOSTNAME}:11311
```



1. NTP 설정 (Network Time Protocol) 설정

서로 다른 pc 간 통신 위함

sudo apt-get install -y chrony ntpdate

sudo ntpdate -q ntp.ubuntu.com

 

2. 소스 리스트 추가

ROS 저장소 주소 추가

sudo sh -c 'echo "deb http://packages.ros.org/ros/ubuntu $(lsb_release -sc) main" > /etc/apt/souces.list.d/ros-latest.list'

 

3. 키 설정

ROS 저장소로부터 패키지 설치 위한 공개키 추가.

ros 버전마다 상이함. wiki.ros.org 참고

noetic 버전은 다음과 같다 

sudo apt-key adv --keyserver 'hktp://keyserver.ubuntu.com:80' --recv-key C1CF6E31E6BADE8868B172B4F42ED6FBAB17C654

 

4. 패키지 업데이트, 설치

ROS 설치 이전 모든 우분투 패키지 업데이트, 이후 설치

sudo apt-get update && sudo apt-get upgrade -y

sudo apt install ros-noetic-desktop-full

 

5. 이후 과정

1) rosinstall 등 설치

rosinstall은 ros 관련 패키지 인스톨 프로그램.

sudo apt install python3-rosdep python3-rosinstall python3-rosinstall-generator python3-wstool build-essential

 

2) rosdep 초기화 

rosdep은 ros의 핵심 컴포넌트, 컴파일 시 의존성 패키지 설치에 도움을 주는 편의 기능.

sudo apt install python3-rosdep 

sudo rosdep init

rosdep update

 

3) 환경설정 파일 불러오기, 작업 폴더 생성 및 초기화

mkdir -p ~/catkin_ws/src

cd ~/catkin_ws/src

catkin_init_worskpace

source /opt/ros/noetic/setup.bash   # noetic 부분에 ros 버전에 맞게 기입 

 

4) 확인

catkin은 ros 전용 빌드 시스템. test 해보자면

cd ~/catkin_ws/   # catkin_ws로 폴더이동 

catkin_make  # catkin make 명령어

# 빌드가 성공하면 ls 명령어로 build와 devel 폴더가 생성되는 것을 확인 (catkin make 성공)

roscore # ros 실행 명령어, 종료는 ctrl+c

 

5) ros 개발 환경 설정

gedit ~/.bashrc # bashrc 파일을 불러온다. 맨 밑에 ros 관련 설정을 추가해주자.

 

####

# Set ROS Noetic

source /opt/ros/noetic/setup.bash

source ~/catkin_ws/devel/setup.bash

 

# Set ROS Network

export ROS_HOSNAME=localhost

export ROS_MASTER_URI=http://${ROS_HOSTNAME}:11311

 

# Set ROS alias command

alias cw='cd ~/catkin_ws'

alias cs='cd ~/catkin_ws/src'

alias cm='cd ~/catkin_ws && catkin_make'

 

이후 저장 후 터미널 재시작. 또는 아래 명령어로 저장, 변경된 설정이 적용된 것을 확인 가능. 

source ~/.bashrc

 

* bashrc의 ros network 설정 시,

다른 기기와의 통신을 위해서는 ip를 구분해서 작성.

하나의 pc에서만 패키지 구동하는 경우에는 위의 설정으로 가능.

본인 ip 확인 위해서는 ip addr, ifconfig 활용 가능

http://blog.naver.com/PostView.nhn?blogId=maestrois&logNo=221634037893&parentCategoryNo=&categoryNo=&viewDate=&isShowPopularPosts=false&from=postView

 

** ifconfig

sudo apt-get install net-tools

*** ip addr

ip addr  

 

&&

0. ROS

ros 구동은 기본적으로 터미널 창에서 이뤄진다. 따라서 여러 개의 터미널 창의 사용은 필수적이다.

이에 나는 다중 터미널 창을 추천한다. 내가 사용하는 것은 terminator.

sudo apt-get install terminator

주요 단축키

터미네이터 실행

ctrl + alt + t

터미네이터 종료

ctrl + shift + q

수평 분할

ctrl + shift + o

수직 분할

ctrl + shift + e

분할 창 이동

ctrl + shift + p

분할 창 종료 

ctrl + shift + w 

 

 

1. ROS 동작 테스트

1) roscore 실행

roscore

2) turtlesim 패키지의 turtlesim_node 실행

rosrun turtlesim turtlesim_node

3) turtlesim 패키지의 turtle_teleop_key 실행

rosrun turtlesim turtle_teleop_key

4) rqt_graph 패키지의 rqt_graph 실행

rqt_graph

 

roscore 실행으로 ros 구동

turtle 실행, 토픽과 노드 간 메시지 송수신을 확인하는 rqt_graph 실행이다.