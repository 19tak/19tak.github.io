---
layout: post
title: "[02] R 과제, dplyr 패키지를 활용한 분석 도전 "
categories: [R, KFQ]
tags: [R, KFQ, dplyr, assignment]
fullview: false
comments: false
---

#### dplyr



# **문제**
### 분석 도전
미국 동북중부 437개 지역의 인구통계 정보를 담고 있는 midwest 데이터를 사용해 데이터 분석 문제를 해결해 보세요.    
midwest는 ggplot2 패키지에 들어 있습니다.   
+ __문제1.__ popadults는 해당 지역의 성인 인구, poptotal은 전체 인구를 나타냅니다. midwest 데이터에 '전체 인구 대비 미성년 인구 백분율' 변수를 추가하세요.   
+ __문제2.__ 미성년 인구 백분율이 가장 높은 상위 5개 county(지역)의 미성년 인구 백분율을 출력하세요.   
+ __문제3.__ 분류표의 기준에 따라 미성년 비율 등급 변수를 추가하고, 각 등급에 몇 개의 지역이 있는지 알아보세요.   

![image](https://user-images.githubusercontent.com/84369912/126747506-8ae34da4-a3f7-47a5-b14c-b21bce1d81df.png)

+ __문제4.__ popasian은 해당 지역의 아시아인 인구를 나타냅니다. '전체 인구 대비 아시아인 인구 백분율' 변수를 추가하고,   
하위 10개 지역의 state(주), county(지역명), 아시아인 인구 백분율을 출력하세요.   

  
### 실행 코드
  
```
# setting
rm(list=ls())
getwd()
setwd("D:\\tak\\r\\hw\\dplyr")

# import library
library(dplyr)
library(ggplot2)

# read data
midwest <- as.data.frame(ggplot2::midwest)

# Q1. 전체 인구 대비 미성년 인구 백분율 변수 추가
# df에 value(백분율) 추가
midwest <- 
  midwest %>% 
  mutate(value=(poptotal-popadults)/poptotal*100)

# Q2. value 상위 5개 county의 value 출력
midwest %>% 
  arrange(desc(value)) %>% 
  select(county,value) %>% 
  head

# Q3. 미성년 비율 등급 변수 추가, 각 등급에 몇개의 지역이 있는지 출력
# value 별 grade 추가
midwest  <-
  midwest %>% 
  mutate(grade=ifelse(value>=40,"large",
                      ifelse(value>=30,"middle","small")))
n <- midwest %>%  group_by(grade) %>% summarise(n=n())
as.data.frame(n)

# Q4. 전체 인구 대비 아시아인 인구 백분율 변수 추가, 하위 10개 지역 state, county 백분율 출력
# df에 asian_value(백분율) 추가 / 하위 10개 지역 해당 항목 출력
midwest %>% 
  mutate(asian_value=popasian/poptotal*100) %>% 
  arrange(asian_value) %>% 
  select(state,county,asian_value) %>% 
  head(10)
```
  