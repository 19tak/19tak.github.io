---
layout: post
title: "[04] ROS, roslibjs 활용 예제"
categories: [ROS]
tags: [ROS, roslibjs, ubuntu, Robot]
fullview: false
comments: false
---

1. test

---

# 1. test

## test

```javascript
function init() {
  // Connecting to ROS
  // -----------------
  var ros = new ROSLIB.Ros();
  // If there is an error on the backend, an 'error' emit will be emitted.
  ros.on('error', function(error) {
    document.getElementById('connecting').style.display = 'none';
    document.getElementById('connected').style.display = 'none';
    document.getElementById('closed').style.display = 'none';
    document.getElementById('error').style.display = 'inline';
    console.log(error);
  });

  // Find out exactly when we made a connection.
  ros.on('connection', function() {
    console.log('Connection made!');
    document.getElementById('connecting').style.display = 'none';
    document.getElementById('error').style.display = 'none';
    document.getElementById('closed').style.display = 'none';
    document.getElementById('connected').style.display = 'inline';
  });

  ros.on('close', function() {
    console.log('Connection closed.');
    document.getElementById('connecting').style.display = 'none';
    document.getElementById('connected').style.display = 'none';
    document.getElementById('closed').style.display = 'inline';
  });

  // Create a connection to the rosbridge WebSocket server.
  // ros.connect('ws://192.168.0.41:9090');
  ros.connect('ws://localhost:9090');

  cmd_vel_listener = new ROSLIB.Topic({
    ros : ros,
    name : "/cmd_vel",
    messageType : 'geometry_msgs/Twist'
  });
  var twist = new ROSLIB.Message({
    linear: {
      x: 0,
      y: 0,
      z: 0
    },
    angular: {
      x: 0,
      y: 0,
      z: 0
    }
  });
  cmd_vel_listener.publish(twist);

  // Initialize the teleop.
  var teleop = new KEYBOARDTELEOP.Teleop({
    ros : ros,
    topic : '/cmd_vel'
  });
  teleop.scale = (1);
}
```
{: file='example.js'}

```html
<head>
    <!-- roslibjs & css -->
    <script type="text/javascript" src="http://static.robotwebtools.org/roslibjs/current/roslib.min.js"></script>
    <script src="https://static.robotwebtools.org/EventEmitter2/current/eventemitter2.min.js"></script>

    <script src="https://static.robotwebtools.org/EaselJS/current/easeljs.js"></script>
    <link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" />
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js"></script>
    <script src="static/js/ros/example.js"></script>
</head>

<body onload="init()">
    <!-- Title -->
    <div class="row page-titles mx-0">
        <div class="col-sm-6 p-md-0">
            <div class="navbar">
                <h4> Security Robot</h4>
                <div id="statusIndicator">
                    <p id="connecting">
                    Connecting to rosbridge...
                    </p>
                    <p id="connected" style="color:#00D600; display:none">
                    Connected
                    </p>
                    <p id="error" style="color:#FF0000; display:none">
                    Error in the backend!
                    </p>
                    <p id="closed" style="display:none">
                    Connection closed.
                    </p>
                </div>
            </div>
        </div>
    </div>
</body>
```
{: file='example.html'}

---

# 참고

**ros 공식 wiki**

- 주소: <http://wiki.ros.org/ROS>

[Whiteknight 님의 포스팅 "ROS 스마트홈 구축"](https://whiteknight3672.tistory.com/245)