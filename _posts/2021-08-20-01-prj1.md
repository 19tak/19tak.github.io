---
layout: post
title: "KFQ, 1차 프로젝트 발표 ppt"
categories: [AI, MachineLearning]
tags: [R]
fullview: false
comments: false
---

본 포스팅은 **KFQ** 한국품질재단 인공지능 개발자 교육과정 1차 프로젝트의 발표 ppt 입니다.

저희 조의 주제는 **<span style="color:#F58224">코로나19</span>**에 따른 국내 **<span style="color:#F58224">영화산업</span>** 동향 및 전망 분석이었습니다.

<iframe src="https://onedrive.live.com/embed?cid=ADFD1CC231D5D8DA&amp;resid=ADFD1CC231D5D8DA%218211&amp;authkey=ALqvmDMHPODEPgM&amp;em=2&amp;wdAr=1.7777777777777777" width="880px" height="518px" frameborder="0">포함된 <a target="_blank" href="https://office.com">Microsoft Office</a> 프레젠테이션, 제공: <a target="_blank" href="https://office.com/webapps">Office</a></iframe>

---

<details>
<summary>PPT 및 프로젝트 설명</summary>
<div markdown="1">

## 1. 프로젝트 개요

코로나로 인해서 무너지고 있는 영화산업, 이에 대한 반등으로 증가하고 있는 국내 OTT 시장. 이러한 뉴스를 다들 접해 보셨을 거라 생각한다.

저희 조는 이러한 뉴스에서 아이디어를 얻어서 프로젝트 주제를 잡고, 다양한 분석 방법을 통해 국내 영화 산업이 나아가야할 방향성 등의 인사이트를 도출하고자 했다.

## 2. 프로젝트 요약 및 환경

저희는 간트차트에서 확인할 수 있듯이, 많은 데이터 테이블을 사용하여, 주제선정 이후 데이터 수집과 EDA, 전처리에서 많은 시간을 사용했다.

분석과 학습 등의 과정은 R에서 진행하였고, 국내통계 사이트 등의 OpenAPI를 Json 형식으로 크롤링, 핸들링할 때에는 파이썬을 같이 사용했다.

## 3. 진행과정 및 산출물

수집하고 실제 사용한 데이터는 총 6가지이다.

1. 영화 관람객 수 데이터
    - 일별 총 관객수 및 매출액
    - 사용변수: 전체 상영 영화 수, 전국 스크린 수, 전체 관람객 수 등
    - 변수 정제: 변수형 변경 (Char 변수 > 수치형 변수)
    - 시각화: 국내/해외/전체영화, 코로나 전/후
    - 이상치: box-cox 변환
    - 출처: KOFIC KOBIS 영화관 입장권 통합 전산망
    > 코로나 이전과 이후 관람객 수 변화, `토-일-수`의 순서로 관람객이 많은 것, 계절에 대한 패턴이 존재하는 것 등을 시각화 자료에서 확인 할 수 있다.
2. 코로나 관련 데이터
    - 결측치: 뉴스 기사와 비교 후 수기 작성
    - 사용변수: 신규/누적 확진자 수, 신규/누적 사망자 수, 치료 중 환자 수 등
    - 변수 정제: 신규 인원에 관한 파생 변수 생성, 치료 중 환자 수 > 생존한 치료 중 환자 수
    - 출처: 공공데이터포털 보건복지부 코로나19 감염현황 조회서비스 Open API
3. 영화 검색량
    - 사용변수: 수집기간 기준 top100 영화명을 바탕으로 '영화' 키워드 검색량
    - 출처: Naver DataLab 통합 검색어 트렌드 API
    > 인기 상영작의 개봉, 수상 전후로 관람객 수가 급증하는 것을 시각화 자료에서 확인 할 수 있다.
4. 날씨
    - 결측치: 강수량/적설량은 0, 기온 및 습도 결측치는 제거
    - 사용변수: 최고/최저/평균 기온, 평균 강수량, 평균/최고 풍속, 평균 습도, 평균 적설량 등
    - 변수 정제: 일별 불쾌지수 파생변수 추가, 지역별로 구분된 데이터 `group by`로 일자별로 평균값 사용
    - 출처: 기상청 지상 (종관, ASOS) 일자료 조회서비스 Open API
5. 미세먼지
    - 결측치: 평균값으로 대체
    - 사용변수: 미세먼지농도
    - 변수 정제: 지역별로 구분된 데이터 `group by`로 일자별로 평균값 사용
6. 공휴일
    - 사용변수: 공휴일 날짜
    - 변수정제: 주말/공휴일을 묶어 휴일, 나머지 평일로 범주형 변수 추가

시간의 흐름에 따른 시각화 자료에서, 코로나 관련 변수들에 있어서는 확실하게 관람객수가 감소한 모습을 볼수 있다.

## 4. 모델 검증 및 분석

분석에 앞서 각 변수들의 상관관계 그래프에서 유의미한 변수들을 확인하고

산점도 그래프를 통해 선형회귀분석을 진행하기로 하였다.

모델링에 앞서, 전처리과정에서 정규성을 만족하지 못하는 전체 관람객 수에 대하여 box-cox 변환을 진행했다.

변환 이후 정규화가 된 것과 이상치가 제거된 모습을 확인 할 수 있다.

4가지 범주형 변수에 대하여 등분산성 검정을 진행하고, 등분산성을 만족치 못하는 변수에 대해

추가로 welch t 검정을 통해, 평균에는 차이가 존재하여 통계적으로 유의미한 변수라 판단했다.

Anova 검정을 통해 유의미한 변수들의 판단과 함께 각 변수들의 교호관계도 확인했다.

해당 변수들로 선형 회귀를 진행하였을 때 81%의 설명력이 나왔지만, 변수가 너무 많아 발생하는 차원문제를 해결하기 위해서

best subset, 전진선택법, 후진소거법, 단계적 선택법의 4가지 변수 선택법을 모두 진행하였고 모두 동일한 8개의 변수를 선택하였다.

선택된 변수를 사용한 선형 회귀 모델에서 설명력 80%, 다중공선성에 문제 없음을 확인하였고

추가로 이상치를 제거하여 설명력을 83%까지 올렸다.

x 변수들을 scaling 하였을 때, 변수를 많이 선택할 수록 오차율이 낮아지는 것을 볼 수 있었지만, 차원 문제로 8개의 변수를 선택하였고, 이 역시 동일한 결론을 얻었다.

하지만 해당 모델의 완성 후, durbin watson 검정을 통해 독립성이 만족하지 않는 것을 발견, 이를 보완하기 위한 비선형 모델과 시계열 모델을 추가로 고려했다.

비선형 모델 중, 비선형 데이터에 적합하며, 오버피팅과 다중공선성을 방지 할 수 있고, 변수 중요도를 파악할 수 있는 장점에서 랜덤포레스트 모델을 사용했다.

최적의 결과를 확인하였을 때, 치료 중 환자 수가 학습에 있어서 가장 중요한 변수로 파악되었고, 시각화 자료에서 확인 할 수 있듯이, 대유행 시기에 맞춰 급증하는 치료 중 환자 수와 함께 급감하는 관람객 수를 볼 수 있다.

시계열 분석을 통해 경향성, 계절성을 분리시킨 이동평균 모델, 자기상관함수 확인을 통한 자기회귀모델에서 유의 수준 이상의 p 값 확인을 통해 시계열 arima 모델을 생성했다.

3개월, 6개월, 12개월, 24개월에 대한 예측 그래프와 함께 예측된 2021년 5월의 평균 관객 92458명, 실제 평균관객 141230명에서 box-cox 정규화 이후 4.875%의 상대오차로 예측이 완료되었다.

해당 오차의 차이는, 분노의 질주, 크루엘라 등 인기 개봉작에 의한 관객수 영향과 코로나 백신의 접종이 진행되며 일어난 것으로 파악 중이다.

## 5. 결론

랜덤 포레스트 모델로부터 치료 중 환자 수가 영화 관객 수 예측에 있어서 압도적으로 중요한 변수라는 것과 함께

시계열 모델로 계절성과 트렌드에 민감한 향후 2년간의 관객 수를 예측했다.

앞서 독립성을 만족하지 못하여, 분석의 의미가 퇴색된 선형회귀모델과 앙상블하여 더 뛰어난 모델을 생성할 경우 더욱 뛰어난 예측이 가능할 것으로 보이며

백신의 접종이 꾸준히 진행 되고 있기에, 관람객 수가 회복되기까지 국내 영화산업계가 조금만 더 버텨준다면, 이전 수준으로 회복하여 다시 빛을 볼 수 있을 것으로 예상된다.

</div>
</details>
---

**프로젝트 진행 기간**
- 2021년 5월 7일 금요일 ~ 6월 7일 월요일