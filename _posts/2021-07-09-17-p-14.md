---
layout: post
title: "[14] Python 과제, 네이버 로그인 후 구매 목록 가져오기 "
categories: [KFQ, Python]
tags: [Python, KFQ, crawling]
fullview: false
comments: false
---

> # 원격제어

- [selenium] chrome 91.0.x driver

<https://chromedriver.chromium.org/downloads> 에서 다운로드 후

본인의 anaconda base directory\driver 에 압축을 풀어 저장한다.


> # Selenium

![image](https://user-images.githubusercontent.com/84369912/126756282-92525504-49f8-4be5-bcd4-77200764acac.png)


> # step 3 : python으로 코딩하기

ex
```
from bs4 import BeautifulSoup
from selenium import webdriver

chrome_driver = 'C:/py_data/driver/chromedriver.exe'
browser = webdriver.Chrome(chrome_driver)

browser.get('https://movie.daum.net/moviedb/grade?movieId=112938')
```

네이버 구매목록 주소 : <https://order.pay.naver.com/home?tabMenu=SHOPPING>


# 코드
```
from selenium import webdriver
import time
from selenium.webdriver.common.keys import Keys
import pyperclip
from bs4 import BeautifulSoup as bs
import pandas as pd
import re
import pandas as pd

id = "id"
pw = "pw"

driver = webdriver.Chrome()
driver.get("https://order.pay.naver.com/home?tabMenu=SHOPPING")
time.sleep(1)

naver_id = driver.find_element_by_id('id')
naver_pw = driver.find_element_by_id('pw')
naver_id.clear()
time.sleep(1)

# id 입력
naver_id.click()
pyperclip.copy(id)
naver_id.send_keys(Keys.CONTROL, 'v')
time.sleep(1)

# 비밀번호 입력
naver_pw.click()
pyperclip.copy(pw)
naver_pw.send_keys(Keys.CONTROL, 'v')
time.sleep(1)

login_btn =  driver.find_element_by_id('log.login')
login_btn.click()

html = driver.page_source
soup = bs(html, 'html.parser')
# soup.text

# 
shop_list = soup.select(".goods_info > .goods > .name")
product_list = []

for product in shop_list:
    product_list.append(product.text)

# tap, enter key 제거
for index, product in enumerate(product_list):
    param = product.replace("\t","")
    param = param.replace("\n","")
    product_list[index] = param

# 정규식 이용 - "네이버플러스 멤버십" 제거
for index, product in enumerate(product_list):
    product_name = re.sub('네이버플러스 멤버십', '', product)
    product_list[index] = product_name
    
# 데이터 프레임으로 만들어주기
my_product = pd.DataFrame({'상품명' : product_list})
my_product

driver.quit() # driver 종료, 브라우저 닫기
```

![image](https://user-images.githubusercontent.com/84369912/126756581-de6e557d-250f-4139-a360-fc8286ba78a8.png)
